<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="author" content="The INCEpTION Team">
<title>INCEpTION Developer Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>INCEpTION Developer Guide</h1>
<div class="details">
<span id="author" class="author">The INCEpTION Team</span><br>
<span id="revnumber">version 0.8.2</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="#sect_setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#_git">GIT</a></li>
<li><a href="#_setting_up_the_for_development_in_eclipse">Setting up the for development in Eclipse</a>
<ul class="sectlevel3">
<li><a href="#_use_a_jdk">Use a JDK</a></li>
<li><a href="#_eclipse_plug_ins">Eclipse Plug-ins</a></li>
</ul>
</li>
<li><a href="#_eclipse_workspace_settings">Eclipse Workspace Settings</a></li>
<li><a href="#_importing_inception_into_the_workspace">Importing INCEpTION into the Workspace</a></li>
<li><a href="#_eclipse_tomcat_integration">Eclipse Tomcat Integration</a></li>
<li><a href="#_checkstyle_and_formatting">Checkstyle and Formatting</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_modules">Modules</a>
<ul class="sectlevel1">
<li><a href="#_documents">Documents</a>
<ul class="sectlevel2">
<li><a href="#_source_documents">Source documents</a></li>
<li><a href="#_annotation_documents">Annotation documents</a></li>
</ul>
</li>
<li><a href="#_annotation_schema">Annotation Schema</a>
<ul class="sectlevel2">
<li><a href="#_layers">Layers</a>
<ul class="sectlevel3">
<li><a href="#_span_layer">Span layer</a></li>
<li><a href="#_relation_layer">Relation layer</a></li>
<li><a href="#_document_metadata">Document Metadata</a></li>
</ul>
</li>
<li><a href="#_features">Features</a></li>
<li><a href="#_layers_2">Layers</a></li>
</ul>
</li>
<li><a href="#sect_search">Search</a>
<ul class="sectlevel2">
<li><a href="#sect_search_mtas">Mtas Index</a></li>
</ul>
</li>
<li><a href="#sect_recommender_tutorial">Implementing a custom recommender</a>
<ul class="sectlevel2">
<li><a href="#_setting_up_the_environment">Setting up the environment</a></li>
<li><a href="#_implementing_the_recommendationengine">Implementing the RecommendationEngine</a>
<ul class="sectlevel3">
<li><a href="#_recommendercontext">RecommenderContext</a></li>
<li><a href="#_training">Training</a></li>
<li><a href="#_predicting">Predicting</a></li>
<li><a href="#_evaluating">Evaluating</a></li>
</ul>
</li>
<li><a href="#_recommendationfactory">RecommendationFactory</a></li>
</ul>
</li>
<li><a href="#_external_recommender">External recommender</a>
<ul class="sectlevel2">
<li><a href="#_external_recommender_api_overview">Overview</a>
<ul class="sectlevel3">
<li><a href="#_version_information">Version information</a></li>
<li><a href="#_contact_information">Contact information</a></li>
<li><a href="#_license_information">License information</a></li>
</ul>
</li>
<li><a href="#_external_recommender_api_paths">Paths</a>
<ul class="sectlevel3">
<li><a href="#_external_recommender_api_predictcas">Predict annotations for a single document</a>
<ul class="sectlevel4">
<li><a href="#_description">Description</a></li>
<li><a href="#_parameters">Parameters</a></li>
<li><a href="#_responses">Responses</a></li>
<li><a href="#_consumes">Consumes</a></li>
<li><a href="#_produces">Produces</a></li>
<li><a href="#_tags">Tags</a></li>
<li><a href="#_example_http_request">Example HTTP request</a>
<ul class="sectlevel5">
<li><a href="#_request_path">Request path</a></li>
<li><a href="#_request_body">Request body</a></li>
</ul>
</li>
<li><a href="#_example_http_response">Example HTTP response</a>
<ul class="sectlevel5">
<li><a href="#_response_200">Response 200</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_external_recommender_api_trainrecommender">Train recommender on a set of documents</a>
<ul class="sectlevel4">
<li><a href="#_description_2">Description</a></li>
<li><a href="#_parameters_2">Parameters</a></li>
<li><a href="#_responses_2">Responses</a></li>
<li><a href="#_consumes_2">Consumes</a></li>
<li><a href="#_tags_2">Tags</a></li>
<li><a href="#_example_http_request_2">Example HTTP request</a>
<ul class="sectlevel5">
<li><a href="#_request_path_2">Request path</a></li>
<li><a href="#_request_body_2">Request body</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_external_recommender_api_definitions">Definitions</a>
<ul class="sectlevel3">
<li><a href="#_external_recommender_api_document">Document</a></li>
<li><a href="#_external_recommender_api_metadata">Metadata</a></li>
<li><a href="#_external_recommender_api_predictrequest">PredictRequest</a></li>
<li><a href="#_external_recommender_api_predictresponse">PredictResponse</a></li>
<li><a href="#_external_recommender_api_train">Train</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sect_log">Event Log</a>
<ul class="sectlevel2">
<li><a href="#sect_log_adapter">Event Logging Adapters</a></li>
</ul>
</li>
<li><a href="#sect_knowledgebase">Knowledge base</a>
<ul class="sectlevel2">
<li><a href="#sect_knowledgebase_irischema">Schema mapping</a></li>
</ul>
</li>
<li><a href="#sect_conceptlinking">Concept Linking</a>
<ul class="sectlevel2">
<li><a href="#_ranking">Ranking</a>
<ul class="sectlevel3">
<li><a href="#_feature_generators">Feature generators</a></li>
<li><a href="#_ranking_strategy">Ranking strategy</a></li>
</ul>
</li>
<li><a href="#_named_entity_linking_recommender">Named entity linking recommender</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_appendices">Appendices</a>
<ul class="sectlevel1">
<li><a href="#sect_systemproperties">Appendix A: System Properties</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document targets developers working on INCEpTION.</p>
</div>
</div>
</div>
<h1 id="_introduction" class="sect0"><a class="anchor" href="#_introduction"></a>Introduction</h1>
<div class="sect1">
<h2 id="sect_setup"><a class="anchor" href="#sect_setup"></a>Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers setting up a development environment.</p>
</div>
<div class="sect2">
<h3 id="_git"><a class="anchor" href="#_git"></a>GIT</h3>
<div class="paragraph">
<p>All sources files are stored using UNIX line endings. If you develop on Windows, you have to
set the <code>core.autocrlf</code> configuration setting to <code>input</code> to avoid accidentally submitting Windows
line endings to the repository. Using <code>input</code> is a good strategy in most cases, thus you should
consider setting this as a global (add <code>--global</code>) or even as a system (<code>--system</code>) setting.</p>
</div>
<div class="listingblock">
<div class="title">Configure git line ending treatment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">C:\&gt; git config --global core.autocrlf input</code></pre>
</div>
</div>
<div class="paragraph">
<p>After changing this setting, best do a fresh clone and check-out of the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_the_for_development_in_eclipse"><a class="anchor" href="#_setting_up_the_for_development_in_eclipse"></a>Setting up the for development in Eclipse</h3>
<div class="paragraph">
<p>This is a guide to setting up a development environment using Eclipse on Mac OS X. The
procedure should be similar for other operation systems.</p>
</div>
<div class="paragraph">
<p>First, you need to follow some steps of the user [InstallationGuide installation guide].
It is recommended to configure a MySQL-server.</p>
</div>
<div class="paragraph">
<p>We recommend you start from a <strong>Eclipse IDE for Java Developers</strong> package.</p>
</div>
<div class="sect3">
<h4 id="_use_a_jdk"><a class="anchor" href="#_use_a_jdk"></a>Use a JDK</h4>
<div class="paragraph">
<p>On Linux or OS X, the following setting is not necessary. Having a full JDK installed on your
system is generally sufficient. You can skip on to the next section.</p>
</div>
<div class="paragraph">
<p>On Windows, you need to edit the <code>eclipse.ini</code> file and directly before the <code>-vmargs</code> line, you
have to add the following two lines. Mind to replace <code>C:/Program Files/Java/jdk1.8.0_144</code> with the actual
location of the JDK on your system. Without this, Eclipse will complain that the
<code>jdk.tools:jdk.tools</code> artifact would be missing.</p>
</div>
<div class="listingblock">
<div class="title">Force Eclipse to run on a JDK</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">-vm
C:/Program Files/Java/jdk1.8.0_144/jre/bin/server/jvm.dll</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_eclipse_plug_ins"><a class="anchor" href="#_eclipse_plug_ins"></a>Eclipse Plug-ins</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Maven Integration:</strong> m2e , already comes pre-installed with the Eclipse IDE for Java Developers.
If you use another edition of Eclipse which does not have m2e pre-installed, go to <strong>Help&#8594;Install
New Software</strong>, select "--All available sites--" and choose <strong>Collaboration &#8594; m2e - Maven Integration
for Eclipse</strong></p>
</li>
<li>
<p><strong>Apache UIMA tools:</strong> Update site: <code><a href="http://www.apache.org/dist/uima/eclipse-update-site/" class="bare">http://www.apache.org/dist/uima/eclipse-update-site/</a></code></p>
</li>
<li>
<p><strong>Eclipse Web Development Tooling:</strong> go to <strong>Help&#8594;Install New Software</strong>, select "--All available
sites--" and select the following plug-ins for installation from the section <strong>Web, XML, Java EE
and OSGi Enterprise Development</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Eclipse Java Web Developer Tools</p>
</li>
<li>
<p>Eclipse Web Developer Tools</p>
</li>
<li>
<p>Eclipse XML Editors and Tools</p>
</li>
<li>
<p>JST Server Adapters</p>
</li>
<li>
<p>JST Server Adapters Extensions</p>
</li>
<li>
<p>JST Server UI</p>
</li>
<li>
<p>m2e-wtp - Maven Integration for WTP</p>
</li>
<li>
<p>WST Server Adapters</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eclipse_workspace_settings"><a class="anchor" href="#_eclipse_workspace_settings"></a>Eclipse Workspace Settings</h3>
<div class="ulist">
<ul>
<li>
<p>You should check that Text file encoding is UTF-8  in <strong>Preferences &#8594; General &#8594; Workspace</strong> of
your Eclipse install.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_importing_inception_into_the_workspace"><a class="anchor" href="#_importing_inception_into_the_workspace"></a>Importing INCEpTION into the Workspace</h3>
<div class="paragraph">
<p>Checkout out the INCEpTION git repository with your favorite git client. If you use the command-line
client, use the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">$ git clone https://github.com/inception-project/inception.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Eclipse, go to <strong>File &#8594; Import</strong>, choose <strong>Existing Maven projects</strong>, and select the folder to which
you have cloned INCEpTION. Eclipse should automatically detect all modules.</p>
</div>
</div>
<div class="sect2">
<h3 id="_eclipse_tomcat_integration"><a class="anchor" href="#_eclipse_tomcat_integration"></a>Eclipse Tomcat Integration</h3>
<div class="paragraph">
<p>Download Apache Tomcat from <code><a href="http://tomcat.apache.org/" class="bare">http://tomcat.apache.org/</a></code> (we&#8217;re using version 8.5). Then, you need to
add the Tomcat server to your runtime configuration. Go to preferences and go to
<strong>Servers &#8594; Runtime environments</strong>:</p>
</div>
<div class="paragraph">
<p>When prompted for an installation path, specify the folder where you extracted (or installed) Apache
Tomcat v8.5 into.</p>
</div>
<div class="paragraph">
<p>Change the runtime configuration for the project. On the left side of the dialog, you should now be
able to select Apache Tomcat. Change its VM arguments and include the definition
<code>-Dinception.home="/srv/inception"</code> to specify the home directory for the application. Also add
<code>-Dwicket.core.settings.general.configuration-type=development</code> to enable the development mode.
This adds additional debugging features to the UI and disables UI caches.</p>
</div>
<div class="paragraph">
<p>Head to the servers pane. If you cannot locate it in your eclipse window, add it by going to
<strong>Window &#8594; Show View &#8594; Other&#8230;&#8203;</strong> and select <strong>Servers</strong>. Right click on <strong>Tomcat v8.5 localhost</strong> and
click on <strong>Add and remove&#8230;&#8203;</strong>:</p>
</div>
<div class="paragraph">
<p>INCEpTION should now be configured to start with Tomcat.</p>
</div>
<div class="paragraph">
<p>In the <strong>Servers</strong> view, double-click on the Tomcat instance you have configured. Activate the
checkbox <strong>Serve modules without publishing</strong>. Go to the <strong>Modules</strong> tab, select the INCEpTION module
and disable auto-reloading. After these changes, you will have to manually restart the Tomcat
server in order for changes to Java class files to take effect. However, as a benefit, changes to
HTML, CSS or JavaScript files take effect immediately and you just have to refresh the browser to
see the changes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_checkstyle_and_formatting"><a class="anchor" href="#_checkstyle_and_formatting"></a>Checkstyle and Formatting</h3>
<div class="paragraph">
<p>We use a style for formatting the source code in INCEpTION. Our approach consists of two steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DKPro code formatting profile - the profile configures your IDE to auto-format the code according to
our guidelines as you go.</p>
</li>
<li>
<p>Checkstyle - this tool is used to check if the source code is actually formatted according to our
guidelines. It is run as part of a Maven build and the build fails if the code is not formatted
properly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a brief summary of the formatting rules:
* no tabs, only spaces
* indenting using 4 spaces in Java files and 2 spaces in XML files
* maximum 100 characters per line (with a few exceptions)
* curly braces on the next line for class/method declarations, same line for logic blocks (if/for/&#8230;&#8203;)
* parameter names start with <code>a</code> (e.g. <code>void foo(String aValue)</code>)</p>
</div>
<div class="paragraph">
<p>First, obtain the DKPro code formatting profile from the <a href="https://dkpro.github.io/contributing/">DKPro website</a> (Section "Code style"). In Eclipse, go to <strong>Preferences &#8594; Java &#8594; Code Style &#8594; Formatter</strong> to import the file. Apparently, the files can also be used with IntelliJ via the [Eclipse Code Formatter](<a href="https://plugins.jetbrains.com/plugin/6546-eclipse-code-formatter" class="bare">https://plugins.jetbrains.com/plugin/6546-eclipse-code-formatter</a>) plugin.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The parameter prefix <code>a</code> needs to be configured manually. In Eclipse go to
       <strong>Preferences &#8594; Java &#8594; Code Style</strong> set the <strong>prefix list</strong> column in the <strong>parameters</strong> row to <code>a</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Second, install the Checkstyle plugin for Eclipse as well as the Maven Checkstyle plugin for Eclipse.
These plugins make Eclipse automatically pick up the checkstyle configuration from the Maven project
and highlight formatting problems directly in the source code editor.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install <strong>Checkstyle Eclipse plugin</strong> from here: <code><a href="http://eclipse-cs.sourceforge.net" class="bare">http://eclipse-cs.sourceforge.net</a></code></p>
</li>
<li>
<p>Install the <strong>Checkstyle configuration plugin for M2Eclipse</strong> from here: <code><a href="http://m2e-code-quality.github.com/m2e-code-quality/site/latest/" class="bare">http://m2e-code-quality.github.com/m2e-code-quality/site/latest/</a></code></p>
</li>
<li>
<p>Select all INCEpTION projects, right click and do a <strong>Maven &#8594; Update project</strong></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Should the steps mentioned above not have been sufficient, close all the INCEpTION projects
      in Eclipse, then remove them form the workspace (not from the disk), delete any <code>.checkstyle</code> files
      in the INCEpTION modules, and then re-import them into Eclipse again using <strong>Import&#8594;Existing Maven
      projects</strong>. During the project import, the Checkstyle configuration plugin for M2Eclipse should
      properly set up the <code>.checkstyle</code> files and activate checkstyle.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<h1 id="_modules" class="sect0"><a class="anchor" href="#_modules"></a>Modules</h1>
<div class="sect1">
<h2 id="_documents"><a class="anchor" href="#_documents"></a>Documents</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_source_documents"><a class="anchor" href="#_source_documents"></a>Source documents</h3>
<div class="paragraph">
<p>The original document uploaded by a user into a project. The document is preserved in its original
format.</p>
</div>
</div>
<div class="sect2">
<h3 id="_annotation_documents"><a class="anchor" href="#_annotation_documents"></a>Annotation documents</h3>
<div class="paragraph">
<p>Annotations made by a particular user on a document. The annotation document is persisted separately
from the original document. There is one annotation document per user per document. Within the tool,
a CAS data structure is used to represent the annotation document.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_annotation_schema"><a class="anchor" href="#_annotation_schema"></a>Annotation Schema</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_layers"><a class="anchor" href="#_layers"></a>Layers</h3>
<div class="paragraph">
<p>The layers mechanism allows supporting different types of annotation layers, e.g. span layers,
relation layers or chain layers. It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>LayerSupport</code> interface provides the API for implementing layer types.</p>
</li>
<li>
<p>The <code>LayerSupportRegistry</code> interface and its default implementation <code>LayerSupportRegistryImpl</code>
serve as an access point to the different supported layer types.</p>
</li>
<li>
<p>The <code>LayerType</code> class which represents a short summary of a supported layer type. It is used
when selecting the type of a feature in the UI.</p>
</li>
<li>
<p>The <code>TypeAdapter</code> interface provides methods to create, manipulate or delete annotations on the
given type of layer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new type of layer, create a Spring component class which implements the
<code>LayerSupport</code> interface. Note that a single layer support class can handle multiple layer types.
However, it is generally recommended to implement a separate layer support for every layer type.
Implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getId()</code> to return a unique identifier for the new layer type. Typically the Spring bean name
is returned here.</p>
</li>
<li>
<p><code>getSupportedLayerTypes()</code> to return a list of all the supported layer types handled by the new
layer support. This values returned here are used to populate the layer type choice when creating
a new layer in the project settings.</p>
</li>
<li>
<p><code>accepts(AnnotationLayer)</code> to return <code>true</code> for any annotation layer that is handled by the new
layer support. I.e. <code>AnnotationLayer.getType()</code> must return a layer type identifier that was produced
by the given layer support.</p>
</li>
<li>
<p><code>generateTypes(TypeSystemDescription, AnnotationLayer)</code> to generate the UIMA type system for the given
annotation layer. This is a partial type system which is merged by the application with the
type systems produced by other layer supports as well as with the base type system of the
application itself (i.e. the DKPro Core type system and the internal types).</p>
</li>
<li>
<p><code>getRenderer(AnnotationLayer)</code> to return an early-stage renderer for the annotations on the
given layer.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The concept of layers is not yet fully modularized. Many parts of the application will only
      know how to deal with specific types of layers. Adding a new layer type should not crash the
      application, but it may also not necessarily be possible to actually use the new layer. In
      particular, changes to the TSV format may be required to support new layer types.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_span_layer"><a class="anchor" href="#_span_layer"></a>Span layer</h4>
<div class="paragraph">
<p>A span layer allows to create annotations over spans of text.</p>
</div>
<div class="paragraph">
<p>If <code>attachType</code> is set, then an annotation can only be created over the same span on which an
annotation of the specified type also exists. For span layers, setting <code>attachFeature</code> is mandatory
if a <code>attachType</code> is defined. The <code>attachFeature</code> indicates the feature on the annotation of the
<code>attachType</code> layer which is to be set to the newly created annotation.</p>
</div>
<div class="paragraph">
<p>For example, the <code>Lemma</code> layer has the <code>attachType</code> set to <code>Token</code> and the <code>attachFeature</code> set to
<code>lemma</code>. This means, that a new lemma annotation can only be created where a token already exists
and that the <code>lemma</code> feature of the token will point to the newly created lemma annotation.</p>
</div>
<div class="paragraph">
<p>Deleting an annotation that has other annotations attached to it will also cause the attached
annotations to be deleted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This case is currently not implemented because it is currently not allowed to
      create spans that attach to other spans. The only span type for which this is relevant
      is the <code>Token</code> type which cannot be deleted.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_relation_layer"><a class="anchor" href="#_relation_layer"></a>Relation layer</h4>
<div class="paragraph">
<p>A relation layer allows to draw arcs between span annotations. The <code>attachType</code> is mandatory for
relation types and specifies which type of annotations arcs can be drawn between.</p>
</div>
<div class="paragraph">
<p>Arcs can only be drawn between annotations of the same layer. It is not possible to draw an arc
between two spans of different layers.</p>
</div>
<div class="paragraph">
<p>Only a single relation layer can attach to any given span layer.</p>
</div>
<div class="paragraph">
<p>If the <code>annotation_feature</code> is set, then the arc is not drawn between annotations of the layer
indicated by <code>annotation_type</code>, but between annotations of the type specified by the feature. E.g.
for a dependency relation layer, <code>annotation_type</code> would be set to <code>Token</code> and <code>annotation_feature</code>
to <code>pos</code>. The <code>Token</code> type has no visual representation in the UI. However, the <code>pos</code> feature points
to a <code>POS</code> annotation, which is rendered and between which the dependency relation arcs are then
drawn.</p>
</div>
<div class="paragraph">
<p>Deleting an annotation that is the endpoint of a relation will also delete the relation. In the case
that <code>annotation_feature</code>, this is also the case if the annotation pointed to is deleted. E.g. if
a POS annotation in the above example is deleted, then the attaching relation annotations are also
deleted.</p>
</div>
</div>
<div class="sect3">
<h4 id="_document_metadata"><a class="anchor" href="#_document_metadata"></a>Document Metadata</h4>
<div class="paragraph">
<p>A document metadata layer can be used to create annotations that apply to an entire document
instead of to a specific span of text.</p>
</div>
<div class="paragraph">
<p>Document metadata types inherit from the UIMA <code>AnnotationBase</code> type (text annotations inherit from
<code>Annotation</code>). As such, they do not have begin/end offsets.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a>Features</h3>
<div class="paragraph">
<p>The features mechanism allows supporting different types of annotation features, e.g. string
features, numeric features, boolean features, link features, etc.
It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>FeatureSupport</code> interface provides the API for implementing feature types.</p>
</li>
<li>
<p>The <code>FeatureSupportRegistry</code> interface and its default implementation <code>FeatureSupportRegistryImpl</code>
serve as an access point to the different supported feature types.</p>
</li>
<li>
<p>The <code>FeatureType</code> class which represents a short summary of a supported feature type. It is used
when selecting the type of a feature in the UI.</p>
</li>
<li>
<p>The <code>TypeAdapter</code> interface provides methods to create, manipulate or delete annotations on the
given type of layer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new type of feature, create a Spring component class which implements the
<code>FeatureSupport</code> interface. Note that a single featre support class can handle multiple feature types.
However, it is generally recommended to implement a separate layer support for every feature type.
Implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getId()</code> to return a unique identifier for the new feature type. Typically the Spring bean name
is returned here.</p>
</li>
<li>
<p><code>getSupportedFeatureTypes()</code> to return a list of all the supported feature types handled by the new
feature support. This values returned here are used to populate the feature type choice when
creating a new feature in the project settings.</p>
</li>
<li>
<p><code>accepts(AnnotationLayer)</code> to return <code>true</code> for any annotation layer that is handled by the new
layer support. I.e. <code>AnnotationLayer.getType()</code> must return a layer type identifier that was produced
by the given layer support.</p>
</li>
<li>
<p><code>generateFeature(TypeSystemDescription, TypeDescription, AnnotationFeature)</code> add the UIMA feature
definition for the given annotation feature to the given type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the new feature has special configuration settings, then implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>readTraits(AnnotationFeature)</code> to extract the special settings form the given annotation feature
definition. It is expected that the traits are stored as a JSON string in the <code>traits</code> field
of <code>AnnotationFeature</code>. If the <code>traits</code> field is <code>null</code>, a new traits object must be returned.</p>
</li>
<li>
<p><code>writeTraits(AnnotationFeature, T)</code> to encode the layer-specific traits object into a JSON string
and store it in the <code>traits</code> field of <code>AnnotationFeature</code>.</p>
</li>
<li>
<p><code>createTraitsEditor(String, IModel&lt;AnnotationFeature&gt;</code> to create a custom UI for the special feature
settings. This UI is shown below the standard settings in the feature detail editor on the
<strong>Layers</strong> tab of the project settings.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_layers_2"><a class="anchor" href="#_layers_2"></a>Layers</h3>
<div class="paragraph">
<p>The layers mechanism allows supporting different types of annotation layers, e.g. span layers,
relation layers or chain layers. It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>LayerSupport</code> interface provides the API for implementing layer types.</p>
</li>
<li>
<p>The <code>LayerSupportRegistry</code> interface and its default implementation <code>LayerSupportRegistryImpl</code>
serve as an access point to the different supported layer types.</p>
</li>
<li>
<p>The <code>LayerType</code> class which represents a short summary of a supported layer type. It is used
when selecting the type of a feature in the UI.</p>
</li>
<li>
<p>The <code>TypeAdapter</code> interface provides methods to create, manipulate or delete annotations on the
given type of layer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new type of layer, create a Spring component class which implements the
<code>LayerSupport</code> interface. Note that a single layer support class can handle multiple layer types.
However, it is generally recommended to implement a separate layer support for every layer type.
Implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getId()</code> to return a unique identifier for the new layer type. Typically the Spring bean name
is returned here.</p>
</li>
<li>
<p><code>getSupportedLayerTypes()</code> to return a list of all the supported layer types handled by the new
layer support. This values returned here are used to populate the layer type choice when creating
a new layer in the project settings.</p>
</li>
<li>
<p><code>accepts(AnnotationLayer)</code> to return <code>true</code> for any annotation layer that is handled by the new
layer support. I.e. <code>AnnotationLayer.getType()</code> must return a layer type identifier that was produced
by the given layer support.</p>
</li>
<li>
<p><code>generateTypes(TypeSystemDescription, AnnotationLayer)</code> to generate the UIMA type system for the given
annotation layer. This is a partial type system which is merged by the application with the
type systems produced by other layer supports as well as with the base type system of the
application itself (i.e. the DKPro Core type system and the internal types).</p>
</li>
<li>
<p><code>getRenderer(AnnotationLayer)</code> to return an early-stage renderer for the annotations on the
given layer.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The concept of layers is not yet fully modularized. Many parts of the application will only
      know how to deal with specific types of layers. Adding a new layer type should not crash the
      application, but it may also not necessarily be possible to actually use the new layer. In
      particular, changes to the TSV format may be required to support new layer types.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_search"><a class="anchor" href="#sect_search"></a>Search</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The search  module contains the basic methods that implement the search service and search
functionalities of INCEpTION.</p>
</div>
<div class="paragraph">
<p>The <code>SearchService</code> and <code>SearchServiceImpl</code> classes define and implement the search service as a Spring component, allowing other modules of INCEpTION to create an index for a given project, and to perform queries over that index.</p>
</div>
<div class="paragraph">
<p>The indexes have two different aspects: the conceptual index, represented by the Index class, and the physical index, represented by a particular physical implementation of an index. This allows different search providers to be used by INCEpTION. Currently, the default search implementation uses Mtas (<a href="https://github.com/meertensinstituut/mtas" class="bare">https://github.com/meertensinstituut/mtas</a>), a Lucene / Solr based index engine that allows to annotate not only raw texts but also different linguistic annotations.</p>
</div>
<div class="paragraph">
<p>Every search provider is defined by its own index factory, with a general index registry to hold all the available search providers.</p>
</div>
<div class="sect2">
<h3 id="sect_search_mtas"><a class="anchor" href="#sect_search_mtas"></a>Mtas Index</h3>
<div class="paragraph">
<p>The Mtas index is implemented in the <strong>MtasDocumentIndex</strong> and <strong>MtasDocumentIndexFactory</strong> classes. Furthermore, the <strong>MtasUimaParser</strong> class provides a parser to be used by Lucene when adding a new document to the index.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MtasDocumentIndexFactory</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The factory allows to build a new MtasDocumentIndex through the getNewIndex method, which is called by the search service.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MtasDocumentIndex</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This class holds the main functionalities of a Mtas index. Its methods are called by the search service and allow to create, open close and drop a Mtas index. It allows to add or delete a document from an index, as well as to perform queries on the index.</p>
</div>
<div class="paragraph">
<p>Each index is related to only one project, and every project can have only one index from a given search provider.</p>
</div>
<div class="paragraph">
<p>When adding a document to a Mtas index, the Lucene engine will use the class MtasUimaParser in order to find out which are the tokens and annotations to be indexed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MtasUimaParser</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The parser is responsible for creating a new TokenCollection to be used by Lucene, whenever a new document is being indexed. The token collection consists of all the tokens and annotations found in the document, which are transformed into Mtas tokens in order to be added to the Lucene index. The parser scans the document CAS and goes through all its annotations, finding out which ones are related to the annotation layers in the document&#8217;s project - those are the annotations to be indexed. Currently, the parser only indexes span type annotations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_recommender_tutorial"><a class="anchor" href="#sect_recommender_tutorial"></a>Implementing a custom recommender</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the overall design of internal recommenders in INCEpTION and gives a
tutorial on how to implement them. Internal recommenders are created by implementing relevant
Java interfaces and are added via Maven dependencies. These are then picked up during application
startup by the Spring Framework.</p>
</div>
<div class="paragraph">
<p>For this tutorial, we will add a recommender for named entities that uses the data majority label for
predicting, i.e. it predicts always the label that appears most often in the training data. The full
code for this example can be found in the <strong>inception-example-imls-data-majority</strong> module.</p>
</div>
<div class="sect2">
<h3 id="_setting_up_the_environment"><a class="anchor" href="#_setting_up_the_environment"></a>Setting up the environment</h3>
<div class="paragraph">
<p>To get started, check out the most recent source code of INCEpTION from
<a href="https://github.com/inception-project/inception">Github</a> and import it as a Maven project in the IDE
of your choice. Add a new module to the INCEpTION project itself, we will call it
<strong>inception-imls-data-majority</strong>.</p>
</div>
<div class="paragraph">
<p>In the root <code>pom.xml</code> of the INCEpTION project, add your recommender as a dependency. Update
the version of the entry you just created to the version you find in the <em>pom.xml</em> of the
INCEpTION project. It should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
…
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>de.tudarmstadt.ukp.inception.app<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>inception-imls-data-majority<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>0.8.2<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
…
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Add the same entry in <code>inception-app-webapp</code>, but omit the version number. It then uses automatically the
version in the parent POM file. Also add it to <code>usedDependencies</code> there.</p>
</div>
<div class="paragraph">
<p>To add a new recommender to INCEpTION, two interfaces need to be implemented. These are
described in the following.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_the_recommendationengine"><a class="anchor" href="#_implementing_the_recommendationengine"></a>Implementing the RecommendationEngine</h3>
<div class="paragraph">
<p>Recommenders give suggestions for possible annotations to the user. In order to do that,
they need to be able be to trained on existing annotations, predict annotations in a document and
be evaluated for a performance estimate. This is what the <code>RecommendationEngine</code> interface is for.
It defines the methods that are used to train, test and evaluate a machine learning algorithm.
Instances of this interface often wrap external machine learning packages like <a href="https://opennlp.apache.org/">OpenNLP</a>
 or <a href="https://deeplearning4j.org/">Deeplearning4j</a>.</p>
</div>
<div class="paragraph">
<p>Recommenders in INCEpTION heavily rely on <a href="https://uima.apache.org">Apache UIMA</a> types and features.
A recommender is configured for a certain layer and a certain feature. A layer can be seen as the
type of annotation you want to to, e.g. <code>POS</code>, <code>NER</code>. Layers correspond to UIMA types. A feature is
one piece of information that should be annotated, e.g. the POS tag. One layer can have many features.</p>
</div>
<div class="paragraph">
<p>Annotations are given to a recommender in the form of a
<a href="http://uima.apache.org/d/uimaj-current/apidocs/index.html">UIMA CAS</a>. One CAS corresponds to one
document in INCEpTION. Annotations from a CAS can be read and manipulated via the
<a href="https://uima.apache.org/d/uimafit-current/api/org/apache/uima/fit/util/CasUtil.html">CasUtil</a>.</p>
</div>
<div class="paragraph">
<p>We start by creating a new class <code>de.tudarmstadt.ukp.inception.recommendation.imls.datamajority.DataMajorityNerRecommender</code> that implements <code>RecommendationEngine</code>.
Please see the JavaDoc of the respective methods for their semantics.</p>
</div>
<div class="listingblock">
<div class="title">Class and member definition for the DataMajorityNerRecommender</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">DataMajorityNerRecommender</span>
        <span class="directive">implements</span> RecommendationEngine
{
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Key</span>&lt;DataMajorityModel&gt; KEY_MODEL = <span class="keyword">new</span> <span class="predefined-type">Key</span>&lt;&gt;(<span class="string"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span>);

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> log = LoggerFactory.getLogger(getClass());

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> layerName;
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> featureName;

    <span class="directive">public</span> DataMajorityNerRecommender(Recommender aRecommender)
    {
        layerName = aRecommender.getLayer().getName();
        featureName = aRecommender.getFeature().getName();
    }

    <span class="comment">/**
     * Given training data in {@code aCasses}, train a model. In order to save data between
     * runs, the {@code aContext} can be used.
     * This method must not mutate {@code aCasses} in any way.
     * @param aContext The context of the recommender
     * @param aCasses The training data
     */</span>
    <span class="type">void</span> train(RecommenderContext aContext, <span class="predefined-type">List</span>&lt;CAS&gt; aCasses) <span class="directive">throws</span> RecommendationException;

    <span class="comment">/**
     * Given text in {@code aCas}, predict target annotations. These should be written into
     * {@code aCas}. In order to restore data from e.g. previous training, the {@code aContext}
     * can be used.
     * @param aContext The context of the recommender
     * @param aCas The training data
     */</span>
    <span class="type">void</span> predict(RecommenderContext aContext, CAS aCas) <span class="directive">throws</span> RecommendationException;

    <span class="comment">/**
     * Evaluates the performance of a recommender by splitting the data given in {@code aCasses}
     * in training and test sets by using {@code aDataSplitter}, training on the training śet
     * and measuring performance on unseen data on the training set. This method must not
     * mutate {@code aCasses} in any way.
     * @param aCasses The CASses containing target annotations
     * @param aDataSplitter The splitter which determines which annotations belong to which set
     * @return Score measuring the performance of predicting on the test set
     */</span>
    <span class="type">double</span> evaluate(<span class="predefined-type">List</span>&lt;CAS&gt; aCasses, DataSplitter aDataSplitter) <span class="directive">throws</span> RecommendationException;

    <span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">DataMajorityModel</span> {
        <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> majorityLabel;
        <span class="directive">private</span> <span class="directive">final</span> <span class="type">double</span> confidence;

        <span class="directive">private</span> DataMajorityModel(<span class="predefined-type">String</span> aMajorityLabel, <span class="type">double</span> aConfidence) {
            majorityLabel = aMajorityLabel;
            confidence = aConfidence;
        }
    }

    <span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">Annotation</span> {
        <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> label;
        <span class="directive">private</span> <span class="directive">final</span> <span class="type">int</span> begin;
        <span class="directive">private</span> <span class="directive">final</span> <span class="type">int</span> end;
        <span class="directive">private</span> <span class="type">double</span> score;

        <span class="directive">private</span> <span class="predefined-type">Annotation</span>(<span class="predefined-type">String</span> aLabel, <span class="type">int</span> aBegin, <span class="type">int</span> aEnd)
        {
            label = aLabel;
            begin = aBegin;
            end = aEnd;
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the constructor, we take the <code>Recommender</code> object which contains the recommender configuration,
e.g. the layer and the name of the feature to recommend. The next step is to implement the required
methods.</p>
</div>
<div class="paragraph">
<p><code>DataMajorityModel</code> and <code>Annotation</code> are internal data classes to simplify the code.</p>
</div>
<div class="sect3">
<h4 id="_recommendercontext"><a class="anchor" href="#_recommendercontext"></a>RecommenderContext</h4>
<div class="paragraph">
<p>Instances of <a href="https://github.com/inception-project/inception/blob/master/inception-recommendation-api/src/main/java/de/tudarmstadt/ukp/inception/recommendation/api/recommender/RecommenderContext.java">RecommendationEngine</a> itself are stateless. If data like trained models need to be
saved and loaded, it can be saved in the <code>RecommenderContext</code> that is given in the interface methods.
When needed again, e.g. for prediction, it then can be loaded again. The <code>Key</code> class is used in order
to ensure type safety.</p>
</div>
</div>
<div class="sect3">
<h4 id="_training"><a class="anchor" href="#_training"></a>Training</h4>
<div class="paragraph">
<p>Training consists of extracting annotations followed by training and saving the model. The
platform needs to know whether the recommender is ready for prediction, this is done by
calling <code>aContext.markAsReadyForPrediction()</code>.</p>
</div>
<div class="listingblock">
<div class="title">Training routine</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> train(RecommenderContext aContext, <span class="predefined-type">List</span>&lt;CAS&gt; aCasses)
        <span class="directive">throws</span> RecommendationException
{
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; annotations = extractAnnotations(aCasses);

    DataMajorityModel model = trainModel(annotations);
    aContext.put(KEY_MODEL, model);
    aContext.markAsReadyForPrediction();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Extracting annotations itself is done by iterating over all documents and selecting all annotations
for each. Here, we need to use the layer name and feature for which the recommender is configured
to extract the correct annotations.</p>
</div>
<div class="listingblock">
<div class="title">Extracting annotations from the documents</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; extractAnnotations(<span class="predefined-type">List</span>&lt;CAS&gt; aCasses)
{
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; annotations = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();

    <span class="keyword">for</span> (CAS cas : aCasses) {
        <span class="predefined-type">Type</span> annotationType = CasUtil.getType(cas, layerName);
        Feature labelFeature = annotationType.getFeatureByBaseName(featureName);

        <span class="keyword">for</span> (AnnotationFS ann : CasUtil.select(cas, annotationType)) {
            <span class="predefined-type">String</span> label = ann.getFeatureValueAsString(labelFeature);
            annotations.add(<span class="keyword">new</span> <span class="predefined-type">Annotation</span>(label, ann.getBegin(), ann.getEnd()));
        }
    }

    <span class="keyword">return</span> annotations;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The training itself is done by counting the number of occurrences for each label that was seen in the
documents. The label is then the one which occurred the most in the training documents.</p>
</div>
<div class="listingblock">
<div class="title">Training the model</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> DataMajorityModel trainModel(<span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; aAnnotations)
        <span class="directive">throws</span> RecommendationException
{
    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Integer</span>&gt; model = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();
    <span class="keyword">for</span> (<span class="predefined-type">Annotation</span> ann : aAnnotations) {
        <span class="type">int</span> count = model.getOrDefault(ann.label, <span class="integer">0</span>);
        model.put(ann.label, count + <span class="integer">1</span>);
    }

    <span class="predefined-type">Map</span>.Entry&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Integer</span>&gt; entry = model.entrySet().stream()
            .max(<span class="predefined-type">Map</span>.Entry.comparingByValue())
            .orElseThrow(
                    () -&gt; <span class="keyword">new</span> RecommendationException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Could not obtain data majority label</span><span class="delimiter">&quot;</span></span>)
            );

    <span class="predefined-type">String</span> majorityLabel = entry.getKey();
    <span class="type">int</span> numberOfAnnotations = model.values().stream().reduce(<span class="predefined-type">Integer</span>::sum).get();
    <span class="type">double</span> confidence = (<span class="type">float</span>) entry.getValue() / numberOfAnnotations;

    <span class="keyword">return</span> <span class="keyword">new</span> DataMajorityModel(majorityLabel, confidence);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We also compute a dummy score here which is displayed in the UI and used for e.g. active learning.</p>
</div>
</div>
<div class="sect3">
<h4 id="_predicting"><a class="anchor" href="#_predicting"></a>Predicting</h4>
<div class="paragraph">
<p>The first thing we do when predicting is to load the model we saved during training. For every
candidate in the document, we assign the majority label, create a new annotation and add it to the <code>CAS</code>.
From there, it will be read by INCEpTION and displayed to the user.</p>
</div>
<div class="listingblock">
<div class="title">Predicting annotations for a CAS</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> predict(RecommenderContext aContext, CAS aCas) <span class="directive">throws</span> RecommendationException
{
    DataMajorityModel model = aContext.get(KEY_MODEL).orElseThrow(() -&gt;
            <span class="keyword">new</span> RecommendationException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Key [</span><span class="delimiter">&quot;</span></span> + KEY_MODEL + <span class="string"><span class="delimiter">&quot;</span><span class="content">] not found in context</span><span class="delimiter">&quot;</span></span>));

    <span class="comment">// Make the predictions</span>
    <span class="predefined-type">Type</span> tokenType = getAnnotationType(aCas, Token.class);
    <span class="predefined-type">Collection</span>&lt;AnnotationFS&gt; candidates = CasUtil.select(aCas, tokenType);
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; predictions = predict(candidates, model);

    <span class="comment">// Add predictions to the CAS</span>
    <span class="predefined-type">Type</span> predictionType = getAnnotationType(aCas, PredictedSpan.class);
    Feature confidenceFeature = predictionType.getFeatureByBaseName(<span class="string"><span class="delimiter">&quot;</span><span class="content">score</span><span class="delimiter">&quot;</span></span>);
    Feature labelFeature = predictionType.getFeatureByBaseName(<span class="string"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>);

    <span class="keyword">for</span> (<span class="predefined-type">Annotation</span> ann : predictions) {
        AnnotationFS annotation = aCas.createAnnotation(predictionType, ann.begin, ann.end);
        annotation.setDoubleValue(confidenceFeature, ann.score);
        annotation.setStringValue(labelFeature, ann.label);
        aCas.addFsToIndexes(annotation);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a document, we consider possible candidates for a named entity to be tokens that are upper case.
In a real recommender, the step of candidate extraction should be more elaborate than that, but for this
tutorial, it is sufficient.</p>
</div>
<div class="listingblock">
<div class="title">Predicting annotations for a CAS</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; predict(<span class="predefined-type">Collection</span>&lt;AnnotationFS&gt; candidates,
                                 DataMajorityModel aModel)
{
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; result = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
    <span class="keyword">for</span> (AnnotationFS token : candidates) {
        <span class="predefined-type">String</span> tokenText = token.getCoveredText();
        <span class="keyword">if</span> (tokenText.length() &gt; <span class="integer">0</span> &amp;&amp; !<span class="predefined-type">Character</span>.isUpperCase(tokenText.codePointAt(<span class="integer">0</span>))) {
            <span class="keyword">continue</span>;
        }

        <span class="type">int</span> begin = token.getBegin();
        <span class="type">int</span> end = token.getEnd();

        <span class="predefined-type">Annotation</span> annotation = <span class="keyword">new</span> <span class="predefined-type">Annotation</span>(aModel.majorityLabel, begin, end);
        annotation.score = aModel.confidence;
        result.add(annotation);
    }

    <span class="keyword">return</span> result;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_evaluating"><a class="anchor" href="#_evaluating"></a>Evaluating</h4>
<div class="paragraph">
<p>When configuring a recommender, it can be specified that it needs to achieve a certain score
before the recommendations are shown to the user. For that, the platform regularly evaluates
recommenders in the background. In code, it is implemented in the <code>evaluate</code> method.</p>
</div>
<div class="paragraph">
<p>Evaluation is done on a set of documents. In order to properly divide the annotations into training
and test set, a <code>DataSplitter</code> is given which tells you to which data set an annotation belongs.</p>
</div>
<div class="paragraph">
<p>For the actual evaluation, we check whether the labels in the test set are the same to the ones we
predict via the majority label.</p>
</div>
<div class="listingblock">
<div class="title">Evaluating the recommender</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">double</span> evaluate(<span class="predefined-type">List</span>&lt;CAS&gt; aCasses, DataSplitter aDataSplitter)
        <span class="directive">throws</span> RecommendationException
{
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; trainingData = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Annotation</span>&gt; testData = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();

    <span class="keyword">for</span> (<span class="predefined-type">Annotation</span> ann : extractAnnotations(aCasses)) {
        <span class="keyword">switch</span> (aDataSplitter.getTargetSet(ann)) {
        <span class="keyword">case</span> TRAIN:
            trainingData.add(ann);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> TEST:
            testData.add(ann);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> IGNORE:
            <span class="keyword">break</span>;
        }
    }

    DataMajorityModel model = trainModel(trainingData);

    <span class="comment">// Compute accuracy between annotated data by the user and predictions</span>
    <span class="type">int</span> correct = <span class="integer">0</span>;
    <span class="keyword">for</span> (<span class="predefined-type">Annotation</span> gold : testData) {
        <span class="keyword">if</span> (gold.label.equals(model.majorityLabel)) {
            correct += <span class="integer">1</span>;
        }
    }

    <span class="keyword">return</span> (<span class="type">double</span>) correct / (<span class="type">double</span>) testData.size();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_recommendationfactory"><a class="anchor" href="#_recommendationfactory"></a>RecommendationFactory</h3>
<div class="paragraph">
<p>The <code>RecommendationFactory</code> is used to create a new recommender instance. It also defines for which
types of layers and features the recommender itself can be used. Here, we decided to only support
token span layers without cross sentence annotations.</p>
</div>
<div class="listingblock">
<div class="title">The RecommendationFactory</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">DataMajorityRecommenderFactory</span>
    <span class="directive">extends</span> RecommendationEngineFactoryImplBase&lt;<span class="predefined-type">Void</span>&gt;
{
    <span class="comment">// This is a string literal so we can rename/refactor the class without it changing its ID</span>
    <span class="comment">// and without the database starting to refer to non-existing recommendation tools.</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> ID =
        <span class="string"><span class="delimiter">&quot;</span><span class="content">de.tudarmstadt.ukp.inception.recommendation.imls.datamajority.de.tudarmstadt.ukp.inception.recommendation.imls.datamajority.DataMajorityNerRecommender</span><span class="delimiter">&quot;</span></span>;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getId()
    {
        <span class="keyword">return</span> ID;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> RecommendationEngine build(Recommender aRecommender)
    {
        <span class="keyword">return</span> <span class="keyword">new</span> DataMajorityNerRecommender(aRecommender);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getName()
    {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Data Majority Recommender</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> accepts(AnnotationLayer aLayer, AnnotationFeature aFeature)
    {
        <span class="keyword">if</span> (aLayer == <span class="predefined-constant">null</span> || aFeature == <span class="predefined-constant">null</span>) {
            <span class="keyword">return</span> <span class="predefined-constant">false</span>;
        }

        <span class="keyword">return</span> (asList(SINGLE_TOKEN, TOKENS).contains(aLayer.getAnchoringMode()))
                &amp;&amp; !aLayer.isCrossSentence() &amp;&amp; SPAN_TYPE.equals(aLayer.getType())
                &amp;&amp; CAS.TYPE_NAME_STRING.equals(aFeature.getType()) || aFeature.isVirtualFeature();
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_external_recommender"><a class="anchor" href="#_external_recommender"></a>External recommender</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_external_recommender_api_overview"><a class="anchor" href="#_external_recommender_api_overview"></a>Overview</h3>
<div class="paragraph">
<p>This section describes the External Recommender API for INCEpTION. An external recommender is a
classifier whose functionality is exposed via a HTTP web service. It can predict annotations for
given documents and optionally be trained on new data. This document describes the endpoints a web
service needs to expose so it can be used with INCEpTION. The documents that are exchanged are in
form of a UIMA CAS. For sending, they have to be serialized to CAS XMI. For receiving, it has to be
deserialized back. There are two main libraries available that manage CAS handling, one is the UIMA
Java SDK, the other one dkpro-cassis (Python).</p>
</div>
<div class="sect3">
<h4 id="_version_information"><a class="anchor" href="#_version_information"></a>Version information</h4>
<div class="paragraph">
<p><em>Version</em> : 1.0.0</p>
</div>
</div>
<div class="sect3">
<h4 id="_contact_information"><a class="anchor" href="#_contact_information"></a>Contact information</h4>
<div class="paragraph">
<p><em>Contact Email</em> : <a href="mailto:inception-users@googlegroups.com">inception-users@googlegroups.com</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_license_information"><a class="anchor" href="#_license_information"></a>License information</h4>
<div class="paragraph">
<p><em>License</em> : Apache 2.0<br>
<em>License URL</em> : <a href="http://www.apache.org/licenses/LICENSE-2.0.html" class="bare">http://www.apache.org/licenses/LICENSE-2.0.html</a><br>
<em>Terms of service</em> : <a href="https://inception-project.github.io" class="bare">https://inception-project.github.io</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_external_recommender_api_paths"><a class="anchor" href="#_external_recommender_api_paths"></a>Paths</h3>
<div class="sect3">
<h4 id="_external_recommender_api_predictcas"><a class="anchor" href="#_external_recommender_api_predictcas"></a>Predict annotations for a single document</h4>
<div class="literalblock">
<div class="content">
<pre>POST /predict</pre>
</div>
</div>
<div class="sect4">
<h5 id="_description"><a class="anchor" href="#_description"></a>Description</h5>
<div class="paragraph">
<p>Sends a CAS together with information about the layer and feature to predict to the external recommender. The external recommender then returns the CAS annotated with predictions.</p>
</div>
</div>
<div class="sect4">
<h5 id="_parameters"><a class="anchor" href="#_parameters"></a>Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Body</strong></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>body</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Document CAS for which annotations will be predicted</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="#_external_recommender_api_predictrequest">PredictRequest</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_responses"><a class="anchor" href="#_responses"></a>Responses</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>200</strong></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Successful prediction</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="#_external_recommender_api_predictresponse">PredictResponse</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_consumes"><a class="anchor" href="#_consumes"></a>Consumes</h5>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_produces"><a class="anchor" href="#_produces"></a>Produces</h5>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_tags"><a class="anchor" href="#_tags"></a>Tags</h5>
<div class="ulist">
<ul>
<li>
<p>predict</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_example_http_request"><a class="anchor" href="#_example_http_request"></a>Example HTTP request</h5>
<div class="sect5">
<h6 id="_request_path"><a class="anchor" href="#_request_path"></a>Request path</h6>
<div class="listingblock">
<div class="content">
<pre>/predict</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_request_body"><a class="anchor" href="#_request_body"></a>Request body</h6>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metadata</span><span class="delimiter">&quot;</span></span> : {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">layer</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">de.tudarmstadt.ukp.dkpro.core.api.ner.type.NamedEntity</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">feature</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">projectId</span><span class="delimiter">&quot;</span></span> : <span class="integer">1337</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">anchoringMode</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">tokens</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">crossSentence</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">document</span><span class="delimiter">&quot;</span></span> : {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">xmi</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;?xml version=</span><span class="char">\&quot;</span><span class="content">1.0</span><span class="char">\&quot;</span><span class="content"> encoding=</span><span class="char">\&quot;</span><span class="content">UTF-8</span><span class="char">\&quot;</span><span class="content">?&gt; &lt;xmi:XMI xmlns:tcas=</span><span class="char">\&quot;</span><span class="content">http:///uima/tcas.ecore</span><span class="char">\&quot;</span><span class="content"> xmlns:xmi=</span><span class="char">\&quot;</span><span class="content">http://www.omg.org/XMI</span><span class="char">\&quot;</span><span class="content"> xmlns:cas=</span><span class="char">\&quot;</span><span class="content">http:///uima/cas.ecore</span><span class="char">\&quot;</span><span class="content"> xmlns:cassis=</span><span class="char">\&quot;</span><span class="content">http:///cassis.ecore</span><span class="char">\&quot;</span><span class="content"> xmi:version=</span><span class="char">\&quot;</span><span class="content">2.0</span><span class="char">\&quot;</span><span class="content">&gt; &lt;cas:NULL xmi:id=</span><span class="char">\&quot;</span><span class="content">0</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;tcas:DocumentAnnotation xmi:id=</span><span class="char">\&quot;</span><span class="content">8</span><span class="char">\&quot;</span><span class="content"> sofa=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> begin=</span><span class="char">\&quot;</span><span class="content">0</span><span class="char">\&quot;</span><span class="content"> end=</span><span class="char">\&quot;</span><span class="content">47</span><span class="char">\&quot;</span><span class="content"> language=</span><span class="char">\&quot;</span><span class="content">x-unspecified</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;cas:Sofa xmi:id=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> sofaNum=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> sofaID=</span><span class="char">\&quot;</span><span class="content">mySofa</span><span class="char">\&quot;</span><span class="content"> mimeType=</span><span class="char">\&quot;</span><span class="content">text/plain</span><span class="char">\&quot;</span><span class="content"> sofaString=</span><span class="char">\&quot;</span><span class="content">Joe waited for the train . The train was late .</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;cas:View sofa=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> members=</span><span class="char">\&quot;</span><span class="content">8</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;/xmi:XMI&gt;</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">documentId</span><span class="delimiter">&quot;</span></span> : <span class="integer">42</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">testuser</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">typeSystem</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;?xml version=</span><span class="char">\&quot;</span><span class="content">1.0</span><span class="char">\&quot;</span><span class="content"> encoding=</span><span class="char">\&quot;</span><span class="content">UTF-8</span><span class="char">\&quot;</span><span class="content">?&gt; &lt;typeSystemDescription xmlns=</span><span class="char">\&quot;</span><span class="content">http://uima.apache.org/resourceSpecifier</span><span class="char">\&quot;</span><span class="content">&gt; &lt;types&gt; &lt;typeDescription&gt; &lt;name&gt;uima.tcas.DocumentAnnotation&lt;/name&gt; &lt;description/&gt; &lt;supertypeName&gt;uima.tcas.Annotation&lt;/supertypeName&gt; &lt;features&gt; &lt;featureDescription&gt; &lt;name&gt;language&lt;/name&gt; &lt;description/&gt; &lt;rangeTypeName&gt;uima.cas.String&lt;/rangeTypeName&gt; &lt;/featureDescription&gt; &lt;/features&gt; &lt;/typeDescription&gt; &lt;/types&gt; &lt;/typeSystemDescription&gt;</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_http_response"><a class="anchor" href="#_example_http_response"></a>Example HTTP response</h5>
<div class="sect5">
<h6 id="_response_200"><a class="anchor" href="#_response_200"></a>Response 200</h6>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">document</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;?xml version=</span><span class="char">\&quot;</span><span class="content">1.0</span><span class="char">\&quot;</span><span class="content"> encoding=</span><span class="char">\&quot;</span><span class="content">UTF-8</span><span class="char">\&quot;</span><span class="content">?&gt; &lt;xmi:XMI xmlns:tcas=</span><span class="char">\&quot;</span><span class="content">http:///uima/tcas.ecore</span><span class="char">\&quot;</span><span class="content"> xmlns:xmi=</span><span class="char">\&quot;</span><span class="content">http://www.omg.org/XMI</span><span class="char">\&quot;</span><span class="content"> xmlns:cas=</span><span class="char">\&quot;</span><span class="content">http:///uima/cas.ecore</span><span class="char">\&quot;</span><span class="content"> xmlns:cassis=</span><span class="char">\&quot;</span><span class="content">http:///cassis.ecore</span><span class="char">\&quot;</span><span class="content"> xmi:version=</span><span class="char">\&quot;</span><span class="content">2.0</span><span class="char">\&quot;</span><span class="content">&gt; &lt;cas:NULL xmi:id=</span><span class="char">\&quot;</span><span class="content">0</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;tcas:DocumentAnnotation xmi:id=</span><span class="char">\&quot;</span><span class="content">8</span><span class="char">\&quot;</span><span class="content"> sofa=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> begin=</span><span class="char">\&quot;</span><span class="content">0</span><span class="char">\&quot;</span><span class="content"> end=</span><span class="char">\&quot;</span><span class="content">47</span><span class="char">\&quot;</span><span class="content"> language=</span><span class="char">\&quot;</span><span class="content">x-unspecified</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;cas:Sofa xmi:id=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> sofaNum=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> sofaID=</span><span class="char">\&quot;</span><span class="content">mySofa</span><span class="char">\&quot;</span><span class="content"> mimeType=</span><span class="char">\&quot;</span><span class="content">text/plain</span><span class="char">\&quot;</span><span class="content"> sofaString=</span><span class="char">\&quot;</span><span class="content">Joe waited for the train . The train was late .</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;cas:View sofa=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> members=</span><span class="char">\&quot;</span><span class="content">8</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;/xmi:XMI&gt;</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_external_recommender_api_trainrecommender"><a class="anchor" href="#_external_recommender_api_trainrecommender"></a>Train recommender on a set of documents</h4>
<div class="literalblock">
<div class="content">
<pre>POST /train</pre>
</div>
</div>
<div class="sect4">
<h5 id="_description_2"><a class="anchor" href="#_description_2"></a>Description</h5>
<div class="paragraph">
<p>Sends a list of CASses to the external recommender for training. No response body is expected.</p>
</div>
</div>
<div class="sect4">
<h5 id="_parameters_2"><a class="anchor" href="#_parameters_2"></a>Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Body</strong></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>body</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">List of documents CAS whose annotations will be used for training</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="#_external_recommender_api_train">Train</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_responses_2"><a class="anchor" href="#_responses_2"></a>Responses</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>204</strong></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Successful training</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">No Content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>429</strong></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Too many training requests have been sent, the sender should wait a while until the next request</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">No Content</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_consumes_2"><a class="anchor" href="#_consumes_2"></a>Consumes</h5>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_tags_2"><a class="anchor" href="#_tags_2"></a>Tags</h5>
<div class="ulist">
<ul>
<li>
<p>train</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_example_http_request_2"><a class="anchor" href="#_example_http_request_2"></a>Example HTTP request</h5>
<div class="sect5">
<h6 id="_request_path_2"><a class="anchor" href="#_request_path_2"></a>Request path</h6>
<div class="listingblock">
<div class="content">
<pre>/train</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_request_body_2"><a class="anchor" href="#_request_body_2"></a>Request body</h6>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metadata</span><span class="delimiter">&quot;</span></span> : {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">layer</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">de.tudarmstadt.ukp.dkpro.core.api.ner.type.NamedEntity</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">feature</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">projectId</span><span class="delimiter">&quot;</span></span> : <span class="integer">1337</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">anchoringMode</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">tokens</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">crossSentence</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">documents</span><span class="delimiter">&quot;</span></span> : [ {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">xmi</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;?xml version=</span><span class="char">\&quot;</span><span class="content">1.0</span><span class="char">\&quot;</span><span class="content"> encoding=</span><span class="char">\&quot;</span><span class="content">UTF-8</span><span class="char">\&quot;</span><span class="content">?&gt; &lt;xmi:XMI xmlns:tcas=</span><span class="char">\&quot;</span><span class="content">http:///uima/tcas.ecore</span><span class="char">\&quot;</span><span class="content"> xmlns:xmi=</span><span class="char">\&quot;</span><span class="content">http://www.omg.org/XMI</span><span class="char">\&quot;</span><span class="content"> xmlns:cas=</span><span class="char">\&quot;</span><span class="content">http:///uima/cas.ecore</span><span class="char">\&quot;</span><span class="content"> xmlns:cassis=</span><span class="char">\&quot;</span><span class="content">http:///cassis.ecore</span><span class="char">\&quot;</span><span class="content"> xmi:version=</span><span class="char">\&quot;</span><span class="content">2.0</span><span class="char">\&quot;</span><span class="content">&gt; &lt;cas:NULL xmi:id=</span><span class="char">\&quot;</span><span class="content">0</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;tcas:DocumentAnnotation xmi:id=</span><span class="char">\&quot;</span><span class="content">8</span><span class="char">\&quot;</span><span class="content"> sofa=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> begin=</span><span class="char">\&quot;</span><span class="content">0</span><span class="char">\&quot;</span><span class="content"> end=</span><span class="char">\&quot;</span><span class="content">47</span><span class="char">\&quot;</span><span class="content"> language=</span><span class="char">\&quot;</span><span class="content">x-unspecified</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;cas:Sofa xmi:id=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> sofaNum=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> sofaID=</span><span class="char">\&quot;</span><span class="content">mySofa</span><span class="char">\&quot;</span><span class="content"> mimeType=</span><span class="char">\&quot;</span><span class="content">text/plain</span><span class="char">\&quot;</span><span class="content"> sofaString=</span><span class="char">\&quot;</span><span class="content">Joe waited for the train . The train was late .</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;cas:View sofa=</span><span class="char">\&quot;</span><span class="content">1</span><span class="char">\&quot;</span><span class="content"> members=</span><span class="char">\&quot;</span><span class="content">8</span><span class="char">\&quot;</span><span class="content">/&gt; &lt;/xmi:XMI&gt;</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">documentId</span><span class="delimiter">&quot;</span></span> : <span class="integer">42</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">testuser</span><span class="delimiter">&quot;</span></span>
  } ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">typeSystem</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;?xml version=</span><span class="char">\&quot;</span><span class="content">1.0</span><span class="char">\&quot;</span><span class="content"> encoding=</span><span class="char">\&quot;</span><span class="content">UTF-8</span><span class="char">\&quot;</span><span class="content">?&gt; &lt;typeSystemDescription xmlns=</span><span class="char">\&quot;</span><span class="content">http://uima.apache.org/resourceSpecifier</span><span class="char">\&quot;</span><span class="content">&gt; &lt;types&gt; &lt;typeDescription&gt; &lt;name&gt;uima.tcas.DocumentAnnotation&lt;/name&gt; &lt;description/&gt; &lt;supertypeName&gt;uima.tcas.Annotation&lt;/supertypeName&gt; &lt;features&gt; &lt;featureDescription&gt; &lt;name&gt;language&lt;/name&gt; &lt;description/&gt; &lt;rangeTypeName&gt;uima.cas.String&lt;/rangeTypeName&gt; &lt;/featureDescription&gt; &lt;/features&gt; &lt;/typeDescription&gt; &lt;/types&gt; &lt;/typeSystemDescription&gt;</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_external_recommender_api_definitions"><a class="anchor" href="#_external_recommender_api_definitions"></a>Definitions</h3>
<div class="sect3">
<h4 id="_external_recommender_api_document"><a class="anchor" href="#_external_recommender_api_document"></a>Document</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>documentId</strong><br>
<em>optional</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Identifier for this document. It is unique in the context of the project.<br>
<strong>Example</strong> : <code>42</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>userId</strong><br>
<em>optional</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Identifier for the user for which recommendations should be made.<br>
<strong>Example</strong> : <code>"testuser"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>xmi</strong><br>
<em>optional</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">CAS as XMI<br>
<strong>Example</strong> : <code>"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;xmi:XMI xmlns:tcas=\"http:///uima/tcas.ecore\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:cas=\"http:///uima/cas.ecore\" xmlns:cassis=\"http:///cassis.ecore\" xmi:version=\"2.0\"&gt; &lt;cas:NULL xmi:id=\"0\"/&gt; &lt;tcas:DocumentAnnotation xmi:id=\"8\" sofa=\"1\" begin=\"0\" end=\"47\" language=\"x-unspecified\"/&gt; &lt;cas:Sofa xmi:id=\"1\" sofaNum=\"1\" sofaID=\"mySofa\" mimeType=\"text/plain\" sofaString=\"Joe waited for the train . The train was late .\"/&gt; &lt;cas:View sofa=\"1\" members=\"8\"/&gt; &lt;/xmi:XMI&gt;"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_external_recommender_api_metadata"><a class="anchor" href="#_external_recommender_api_metadata"></a>Metadata</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>anchoringMode</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Describes how annotations are anchored to tokens. Is one of 'characters', 'singleToken', 'tokens', 'sentences'.<br>
<strong>Example</strong> : <code>"tokens"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>crossSentence</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">True if the project supports cross-sentence annotations, else False<br>
<strong>Example</strong> : <code>false</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>feature</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Feature of the layer which should be predicted<br>
<strong>Example</strong> : <code>"value"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>layer</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Layer which should be predicted<br>
<strong>Example</strong> : <code>"de.tudarmstadt.ukp.dkpro.core.api.ner.type.NamedEntity"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>projectId</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">The id of the project to which the document(s) belong.<br>
<strong>Example</strong> : <code>1337</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">integer</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_external_recommender_api_predictrequest"><a class="anchor" href="#_external_recommender_api_predictrequest"></a>PredictRequest</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>document</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Example</strong> : <code>"<a href="#_external_recommender_api_document">Document</a>"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="#_external_recommender_api_document">Document</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>metadata</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Example</strong> : <code>"<a href="#_external_recommender_api_metadata">Metadata</a>"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="#_external_recommender_api_metadata">Metadata</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>typeSystem</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Type system XML of the CAS<br>
<strong>Example</strong> : <code>"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;typeSystemDescription xmlns=\"http://uima.apache.org/resourceSpecifier\"&gt; &lt;types&gt; &lt;typeDescription&gt; &lt;name&gt;uima.tcas.DocumentAnnotation&lt;/name&gt; &lt;description/&gt; &lt;supertypeName&gt;uima.tcas.Annotation&lt;/supertypeName&gt; &lt;features&gt; &lt;featureDescription&gt; &lt;name&gt;language&lt;/name&gt; &lt;description/&gt; &lt;rangeTypeName&gt;uima.cas.String&lt;/rangeTypeName&gt; &lt;/featureDescription&gt; &lt;/features&gt; &lt;/typeDescription&gt; &lt;/types&gt; &lt;/typeSystemDescription&gt;"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_external_recommender_api_predictresponse"><a class="anchor" href="#_external_recommender_api_predictresponse"></a>PredictResponse</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>document</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">CAS with annotations from the external recommender as XMI<br>
<strong>Example</strong> : <code>"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;xmi:XMI xmlns:tcas=\"http:///uima/tcas.ecore\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:cas=\"http:///uima/cas.ecore\" xmlns:cassis=\"http:///cassis.ecore\" xmi:version=\"2.0\"&gt; &lt;cas:NULL xmi:id=\"0\"/&gt; &lt;tcas:DocumentAnnotation xmi:id=\"8\" sofa=\"1\" begin=\"0\" end=\"47\" language=\"x-unspecified\"/&gt; &lt;cas:Sofa xmi:id=\"1\" sofaNum=\"1\" sofaID=\"mySofa\" mimeType=\"text/plain\" sofaString=\"Joe waited for the train . The train was late .\"/&gt; &lt;cas:View sofa=\"1\" members=\"8\"/&gt; &lt;/xmi:XMI&gt;"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_external_recommender_api_train"><a class="anchor" href="#_external_recommender_api_train"></a>Train</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>documents</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">CAS as XMI<br>
<strong>Example</strong> : <code>[ "<a href="#_external_recommender_api_document">Document</a>" ]</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">&lt; <a href="#_external_recommender_api_document">Document</a> &gt; array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>metadata</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Example</strong> : <code>"<a href="#_external_recommender_api_metadata">Metadata</a>"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="#_external_recommender_api_metadata">Metadata</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>typeSystem</strong><br>
<em>required</em></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Type system XML of the CAS<br>
<strong>Example</strong> : <code>"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;typeSystemDescription xmlns=\"http://uima.apache.org/resourceSpecifier\"&gt; &lt;types&gt; &lt;typeDescription&gt; &lt;name&gt;uima.tcas.DocumentAnnotation&lt;/name&gt; &lt;description/&gt; &lt;supertypeName&gt;uima.tcas.Annotation&lt;/supertypeName&gt; &lt;features&gt; &lt;featureDescription&gt; &lt;name&gt;language&lt;/name&gt; &lt;description/&gt; &lt;rangeTypeName&gt;uima.cas.String&lt;/rangeTypeName&gt; &lt;/featureDescription&gt; &lt;/features&gt; &lt;/typeDescription&gt; &lt;/types&gt; &lt;/typeSystemDescription&gt;"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_log"><a class="anchor" href="#sect_log"></a>Event Log</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The event logging module allows catching Spring events and logging them them to the
database. It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>EventRepository</code> interface and its default implementation <code>EventRepositoryImpl</code> which
serve as the data access layer for logged events.</p>
</li>
<li>
<p>The <code>EventLoggingListener</code> which hooks into Spring, captures events, and then uses the
<code>EventRepository</code> to log them.</p>
</li>
<li>
<p>The <code>EventLoggingAdapter</code> interface. Spring components implementing this interface are
used to extract information from Spring events and to convert them into a format
suitable to be logged.</p>
</li>
<li>
<p>The <code>LoggedEvent</code> entity class which maps the logged events to the database.</p>
</li>
<li>
<p>The <code>LoggedEventExporter</code> and <code>ExportedLoggedEvent</code> which are used to export/import the
event log as part of a project export/import.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The log module comes with a number of adapters for common events such as annotation
manipulation, changes to the project configuration, etc. Any event for which no specific
adapter exists is handled using the <code>GenericEventAdapter</code> which logs only general
information (e.g. the timestamp, current user, type of event) but no event-specific
details (e.g. current project, current document, or even more specific details). Note that
even the <code>GenericEventAdapter</code> skips logging certain Spring events related to session
management, authorization, and the Spring context life-cycle.</p>
</div>
<div class="sect2">
<h3 id="sect_log_adapter"><a class="anchor" href="#sect_log_adapter"></a>Event Logging Adapters</h3>
<div class="paragraph">
<p>New logging adapters should be created in the module which provides the event they are logging.
Logging adapters for events generated outside INCEpTION (i.e. in upstream code) are usually
added to the log module itself.</p>
</div>
<div class="paragraph">
<p>To add support for a logging a new event, create a Spring component class which implements the
<code>EventLoggingAdapter</code> interface. Implement the following methods depending on the context in which
the event is triggered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getProject(Event)</code> if the event is triggered in the context of a specific project (applies to most
events);</p>
</li>
<li>
<p><code>getDocument(Event)</code> if the event is related to a specific source document (e.g. applies to
events triggered during annotation).</p>
</li>
<li>
<p><code>getDocument(Event)</code> if the event is related to a specific annotator (e.g. applies to
events triggered during annotation).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The methods <code>getEvent</code>, <code>getUser</code> and <code>getCreated</code> normally do not need to be implemented.</p>
</div>
<div class="paragraph">
<p>Most event adapters implement the <code>getDetails</code> method. This method must return a JSON string which
contains any relevant information about the event not covered by the methods above. E.g. for an
annotation manipulation event, it would contain information helping to identify the annotation and
the state before and after the manipulation. In order to generate this JSON string, the adapter
typically contains an inner class called <code>Details</code> to which the detail information from the event
is copied and which is then serialized to JSON using <code>JSONUtil.toJsonString(&#8230;&#8203;)</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_knowledgebase"><a class="anchor" href="#sect_knowledgebase"></a>Knowledge base</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="sect_knowledgebase_irischema"><a class="anchor" href="#sect_knowledgebase_irischema"></a>Schema mapping</h3>
<div class="paragraph">
<p>An IRI Schema defines the following attributes that are used for making queries in a knowledge base.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Schema Mapping Attributes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class of resources that are classes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:Class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subclass IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines a <strong>subclass of</strong> relation between classes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:subClassOf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines which class a resource belongs to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdf:type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines a human readable label for a class or instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:label</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines a description for a class or instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class of resources that are properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdf:Property</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subproperty IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines a <strong>subproperty of</strong> relation between properties.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:subPropertyOf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property Label IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines a human readable label for a property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:label</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property Description IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property that defines a description for a property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rdfs:comment</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>There are multiple classes in the knowledge base module that model the IRI Schema of a knowledge
base. All the classes share that they have a single class-attribute for each IRI in the IRI Schema.
However each class has a different use case. The relevant classes are shown <a href="#KBClasses">here</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the structure of the general IRI Schema is changed (e.g. a new attribute is added) all
      the classes need to be adjusted.*
</td>
</tr>
</table>
</div>
<table id="KBClasses" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Knowledge base &amp; schema mapping classes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>KnowledgeBase</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General model for a knowledge base in frontend and backend components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>KnowledgeBaseProfile</code> and  <code>KnowledgeBaseMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read pre-configured knowledge base profiles from a yaml file.
  The actual IRI Schema is modeled in KnowledgeBaseMapping.java.
  The yaml file is located at: <code>&#8230;&#8203;/inception-kb/src/main/resources/de/tudarmstadt/ukp/inception/kb/knowledgebase-profiles.yaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SchemaProfile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines some specific IRI Schemas (e.g RDF, WIKIDATA, SKOS).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExportedKnowledgeBase</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export a knowledge base configuration when a project is exported.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_conceptlinking"><a class="anchor" href="#sect_conceptlinking"></a>Concept Linking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The concept linking module is used to find items from a knowledge base that match a certain query
and context. It is used e.g. by the <code>ConceptFeatureEditor</code> to display items which match a concept
mention and it can use the mention&#8217;s context to rank (and optimally disambiguate) the candidate
items. It can also be used for non-contextualized queries, e.g. via the search field on the
knowledge base browsing page. The module consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>ConceptLinkingService</code> interface and its default implementation <code>ConceptLinkingServiceImpl</code> which
is the main entry point for locating KB items.</p>
</li>
<li>
<p>The <code>EntityRankingFeatureGenerator</code> interface. Spring beans which implement this interface are
automatically picked up by the <code>ConceptLinkingServiceImpl</code> and used to rank candidates.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_ranking"><a class="anchor" href="#_ranking"></a>Ranking</h3>
<div class="sect3">
<h4 id="_feature_generators"><a class="anchor" href="#_feature_generators"></a>Feature generators</h4>
<div class="paragraph">
<p>The module currently uses primarily the <code>LevenshteinFeatureGenerator</code> which calculate the Levenshtein
distance between the mention text and the KB item label as well as between the query text (e.g.
entered into the auto-complete field of the <code>ConceptFeatureEditor</code>) and the KB item label.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ranking_strategy"><a class="anchor" href="#_ranking_strategy"></a>Ranking strategy</h4>
<div class="paragraph">
<p>The ranking method is currently hard-coded in <code>ConceptLinkingServiceImpl.baseLineRankingStrategy()</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_named_entity_linking_recommender"><a class="anchor" href="#_named_entity_linking_recommender"></a>Named entity linking recommender</h3>
<div class="paragraph">
<p>The module also includes the <code>NamedEntityLinker</code> recommender which can be used to generate annotation
recommendations. It gets triggered for any <code>NamedEntity</code> annotations and suggests which KB items to
link them to.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<h1 id="_appendices" class="sect0"><a class="anchor" href="#_appendices"></a>Appendices</h1>
<div class="sect1">
<h2 id="sect_systemproperties"><a class="anchor" href="#sect_systemproperties"></a>Appendix A: System Properties</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">wicket.configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable Wicket debug mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">deployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">development</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.8.2<br>
Last updated 2019-03-19 15:59:40 CET
</div>
</div>
</body>
</html>